<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>2048 Mini – ArcadeHub</title>
<link href="../styles.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
.game-wrap{max-width:900px;margin:20px auto;padding:12px}
.canvas-wrap{display:grid;place-items:center;background:#f3f4f6;border:1px solid #e5e7eb;border-radius:12px;min-height:360px}
.controls{margin-top:10px;color:#64748b}
button.cta.small{padding:.55rem .9rem;border-radius:10px}
</style>

</head>
<body>
<header class="site-header">
  <div class="wrap bar">
    <a class="brand" href="../index.html"><img src="../assets/logo.svg" alt="ArcadeHub logo" style="height:36px"><strong class="brand-name">ArcadeHub</strong></a>
    <a class="cta" href="../index.html" style="text-decoration:none;">Back to Home</a>
  </div>
</header>
<main class="wrap section">
  <div class="panel">
    <h1 class="h2">2048 Mini</h1>
    <div class="game-wrap">
      
<div class="canvas-wrap" style="min-height:auto;">
  <div id="g" style="display:grid;grid-template-columns:repeat(4,80px);gap:8px;background:#f3f4f6;padding:10px;border-radius:12px;border:1px solid #e5e7eb"></div>
</div>

 
<div class="controls small"><strong>How to play:</strong> Use Arrow keys / W A S D. Merge tiles to reach higher numbers.</div>
<div class="controls"><a class="cta small" id="restartBtn" href="#">Restart</a></div>
 
<script>
import { saveHighScore } from './game-utils.js';
const g=document.getElementById('g'); let grid=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
function draw(){ g.innerHTML=''; grid.forEach(v=>{ const d=document.createElement('div'); d.style.height='80px'; d.style.border='1px solid #e5e7eb'; d.style.borderRadius='10px'; d.style.display='grid'; d.style.placeItems='center'; d.style.fontWeight='700'; d.textContent=v||''; d.style.background=v? '#fff':'#fafafa'; g.appendChild(d);});}
function spawn(){ let i=[]; grid.forEach((v,idx)=>{ if(!v) i.push(idx)}); if(i.length){ grid[i[Math.floor(Math.random()*i.length)]]=Math.random()<.9?2:4; } }
function slide(row){ row=row.filter(v=>v); for(let i=0;i<row.length-1;i++) if(row[i]===row[i+1]){ row[i]*=2; row[i+1]=0; } row=row.filter(v=>v); while(row.length<4) row.push(0); return row; }
function move(dir){
  let moved=false;
  for(let r=0;r<4;r++){
    let row=[];
    for(let c=0;c<4;c++) row.push(grid[r*4+(dir%2?3-c:c)]);
    row=slide(row);
    for(let c=0;c<4;c++){ const val=row[c]; const idx=r*4+(dir%2?3-c:c); if(grid[idx]!==val){grid[idx]=val;moved=true;} }
  }
  if(dir>=2){ // transpose repeat
    let trans=[...grid];
    for(let r=0;r<4;r++)for(let c=0;c<4;c++) grid[r*4+c]=trans[c*4+r];
    move(dir-2); return;
  }
  if(moved) spawn(); draw(); saveHighScore('2048 Mini', Math.max(...grid));
}
document.addEventListener('keydown', e=>{
  const k=e.key.toLowerCase(); if(k==='arrowleft'||k==='a') move(0); if(k==='arrowright'||k==='d') move(1); if(k==='arrowup'||k==='w') move(2); if(k==='arrowdown'||k==='s') move(3);
});
spawn(); spawn(); draw(); saveHighScore('2048 Mini', Math.max(...grid));
document.getElementById('restartBtn')&& (document.getElementById('restartBtn').onclick=()=>location.reload());
</script>

    </div>
  </div>
</main>
<footer class="footer"><div class="wrap cols"><div class="small">© <span id="year">2025</span> HyperGameZ</div></div></footer>
<script>
const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear(); y.parentElement.innerHTML = `© ${new Date().getFullYear()} ArcadeHub. All rights reserved.`;
</script>

<script>
function saveHighScore(gameKey, score){
  const key='arcadehub_scores';
  let data={}; try{ data=JSON.parse(localStorage.getItem(key))||{} }catch(e){ data={} }
  const prev=data[gameKey]?.best || 0;
  if(score>prev){ data[gameKey]={best:score, updated: Date.now()}; localStorage.setItem(key, JSON.stringify(data)); }
}
</script>





<script>
(function(){
  function bind(){
    document.querySelectorAll('#restartBtn').forEach(function(btn){
      if(!btn._bound){
        btn._bound = true;
        btn.addEventListener('click', function(e){ e.preventDefault(); location.reload(); });
      }
    });
  }
  if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', bind); } else { bind(); }
})();
</script>

</body>
</html>